{
  "kind": "build_request",
  "title": "Fix Text.toLowercase() filter syntax in buildShuffledSectionFromArray",
  "priority": "high",
  "requirements": [
    {
      "id": "REQ-20",
      "text": "In backend/main.mo, fix the invalid filter syntax in the `buildShuffledSectionFromArray` function by replacing `Text.equal(e.primaryMuscleGroup.toLower(), group.toLower())` with `Text.equal(Text.toLowercase(e.primaryMuscleGroup), Text.toLowercase(group))`. Do not change any other code in the file.",
      "target": "backend",
      "source": {
        "messageIds": [
          "msg-recent"
        ],
        "quotes": [
          "Going ahead with the smallest possible focused fix — just the single Text.toLowercase() replacement in buildShuffledSectionFromArray first."
        ]
      },
      "acceptanceCriteria": [
        "The `buildShuffledSectionFromArray` function uses `Text.toLowercase()` instead of `.toLower()` for muscle group comparison",
        "No other functions or code in backend/main.mo are modified",
        "The backend compiles without errors"
      ]
    }
  ],
  "constraints": [
    "Only modify the single filter expression inside buildShuffledSectionFromArray — do not touch any other function, array, or variable",
    "Do not attempt a full rewrite or multiple simultaneous fixes"
  ],
  "nonGoals": [
    "Fixing buildShuffledSectionFromArrayWithLimit in this pass",
    "Fixing adjustRecoveryForTestMode in this pass",
    "Switching imports from mo:core to mo:base",
    "Adding unifiedLegsLibrary or useUnifiedLegs toggle",
    "Any frontend changes"
  ],
  "imageRequirements": {
    "required": [],
    "edits": []
  }
}